!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.vueHeadroom=e()}(this,function(){"use strict";function t(t){var e,n=t.currentScrollY>=t.lastScrollY?"down":"up",o=Math.abs(t.currentScrollY-t.lastScrollY);return"down"===n&&t.currentScrollY>=t.offset&&o>t.downTolerance?e="unpin":("up"===n&&o>t.upTolerance||t.currentScrollY<=t.offset)&&(e="pin"),e}function e(){for(var t=document.createElement("div"),e=!1,n=["perspectiveProperty","WebkitPerspective"],o=n.length-1;o>=0;o--)e=e||void 0!==t.style[n[o]];if(e){var i=document.createElement("style");i.textContent="#modernizr{width:0;height:0} @media (transform-3d),(-webkit-transform-3d){#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",document.getElementsByTagName("head")[0].appendChild(i),t.id="modernizr",document.body.appendChild(t),e=7===t.offsetWidth&&18===t.offsetHeight,i.parentNode.removeChild(i),t.parentNode.removeChild(t)}return e}function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}for(var o="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i=function(t,e){return e={exports:{}},t(e,e.exports),e.exports}(function(t){(function(){var e,n,o,i,r,s;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(t.exports=function(){return(e()-r)/1e6},n=process.hrtime,i=(e=function(){var t;return 1e9*(t=n())[0]+t[1]})(),s=1e9*process.uptime(),r=i-s):Date.now?(t.exports=function(){return Date.now()-o},o=Date.now()):(t.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(o)}),r="undefined"==typeof window?o:window,s=["moz","webkit"],l="AnimationFrame",c=r["request"+l],u=r["cancel"+l]||r["cancelRequest"+l],h=0;!c&&h<s.length;h++)c=r[s[h]+"Request"+l],u=r[s[h]+"Cancel"+l]||r[s[h]+"CancelRequest"+l];if(!c||!u){var a=0,d=0,p=[];c=function(t){if(0===p.length){var e=i(),n=Math.max(0,1e3/60-(e-a));a=n+e,setTimeout(function(){var t=p.slice(0);p.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(a)}catch(t){setTimeout(function(){throw t},0)}},Math.round(n))}return p.push({handle:++d,callback:t,cancelled:!1}),d},u=function(t){for(var e=0;e<p.length;e++)p[e].handle===t&&(p[e].cancelled=!0)}}var f=function(t){return c.call(r,t)};f.cancel=function(){u.apply(r,arguments)},f.polyfill=function(){r.requestAnimationFrame=c,r.cancelAnimationFrame=u};var m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},g={pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",bottom:"headroom--bottom",notBottom:"headroom--not-bottom",initial:"headroom"},v={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:t.cls,style:t.style},[t._t("default")],2)},staticRenderFns:[],name:"vueHeadroom",data:function(){return{isTop:!1,isNotTop:!1,isBottom:!1,isNotBottom:!1,isPinned:!1,isUnpinned:!1,currentScrollY:0,lastScrollY:0,state:"",translate:0,isSupport3d:e()}},props:{scroller:{type:Function,default:function(){return window}},disabled:{type:Boolean,default:!1},upTolerance:{type:Number,default:5},downTolerance:{type:Number,default:0},speed:{type:Number,default:250},easing:{type:String,default:"ease-in-out"},zIndex:{type:Number,default:9999},onPin:Function,onUnpin:Function,onTop:Function,onNotTop:Function,onBottom:Function,onNotBottom:Function,offset:{type:Number,default:0},classes:{type:Object,default:function(){return g}}},watch:{disabled:function(t){t?(this.pin(),this.scroller().removeEventListener("scroll",this._handleScroll)):this.scroller().addEventListener("scroll",this._handleScroll)}},mounted:function(){this.disabled||this.scroller().addEventListener("scroll",this._handleScroll),this._handleScroll()},beforeDestroy:function(){this.scroller().removeEventListener("scroll",this._handleScroll)},computed:{style:function(){return{position:this.isInTop?"fixed":"relative",top:"0",left:"0",right:"0","z-index":this.isInTop?this.zIndex:1,transform:this.isSupport3d?"translate3d(0, "+this.translate+", 0)":"translateY("+this.translate+")",transition:this.isInTop?"all "+this.speed+"ms "+this.easing:null}},clsOpts:function(){return m({},g,this.classes)},cls:function(){var t,e=this.clsOpts;return this.disabled?{}:(t={},n(t,e.top,this.isTop),n(t,e.notTop,this.isNotTop),n(t,e.bottom,this.isBottom),n(t,e.notBottom,this.isNotBottom),n(t,e.pinned,this.isPinned),n(t,e.unpinned,this.isUnpinned),n(t,e.initial,!0),t)},isInTop:function(){return"pinned"===this.state||"unpinned"===this.state}},methods:{_getViewportHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},_getElementPhysicalHeight:function(t){return Math.max(t.offsetHeight,t.clientHeight)},_getDocumentHeight:function(){var t=document.body,e=document.documentElement;return Math.max(t.scrollHeight,e.scrollHeight,t.offsetHeight,e.offsetHeight,t.clientHeight,e.clientHeight)},_getElementHeight:function(t){return Math.max(t.scrollHeight,t.offsetHeight,t.clientHeight)},_getScrollerPhysicalHeight:function(){var t=this.scroller();return t===window||t===document.body?this._getViewportHeight():this._getElementPhysicalHeight(t)},_getScrollerHeight:function(){var t=this.scroller();return t===window||t===document.body?this._getDocumentHeight():this._getElementHeight(t)},_isOutOfBound:function(t){var e=t<0,n=t+this._getScrollerPhysicalHeight()>this._getScrollerHeight();return e||n},_handleScroll:function(){f(this.update)},_getScrollY:function(){return void 0!==this.scroller().pageYOffset?this.scroller().pageYOffset:void 0!==this.scroller().scrollTop?this.scroller().scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop},update:function(){if(this.currentScrollY=this._getScrollY(),!this._isOutOfBound(this.currentScrollY)){this.currentScrollY<=this.offset?this.top():this.notTop(),this.currentScrollY+this._getViewportHeight()>=this._getScrollerHeight()?this.bottom():this.notBottom();var e=t(this);"pin"===e?this.pin():"unpin"===e&&this.unpin(),this.lastScrollY=this.currentScrollY}},top:function(){this.isTop||(this.isTop=!0,this.isNotTop=!1,this.onTop&&this.onTop())},notTop:function(){this.isNotTop||(this.isTop=!1,this.isNotTop=!0,this.onNotTop&&this.onNotTop())},bottom:function(){this.isBottom||(this.isBottom=!0,this.isNotBottom=!1,this.onBottom&&this.onBottom())},notBottom:function(){this.isNotBottom||(this.isNotBottom=!0,this.isBottom=!1,this.onNotBottom&&this.onNotBottom())},pin:function(){var t=this;this.isPinned||(this.isPinned=!0,this.isUnpinned=!1,this.onPin&&this.onPin(),this.$emit("pin"),this.translate=0,setTimeout(function(){t.state="pinned"},0))},unpin:function(){var t=this;!this.isPinned&&this.isUnpinned||(this.isUnpinned=!0,this.isPinned=!1,this.onUnpin&&this.onUnpin(),this.$emit("unpin"),this.translate="-100%",setTimeout(function(){t.state="unpinned"},0))}}},w=function t(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.installed||e.component(v.name,v)};return"undefined"!=typeof window&&window.Vue&&w(window.Vue),{headroom:v,install:w}});
